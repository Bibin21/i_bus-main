{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block head %}

<title>My Pass</title>

{% endblock %}

{% block body %}

<div class="container">
    <div class="text-center mt-3">
        <h2>My Pass</h2>
    </div>

    <div class="row">
        <div class="col-md-6 offset-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="text-center">
                        <h2>
                            <span class="badge text-bg-primary">
                            Bus No {{ user_bus_pass.bus.bus_number }}
                            </span>
                        </h2>
                        
                        <div class="row mt-4">
                            <div class="col-md-5">
                                <h3>College</h3>
                            </div>
                            <div class="col-md-2">
                                <h3><i class="fa-solid fa-arrow-right-arrow-left"></i></h3>
                            </div>
                            <div class="col-md-5">
                                <h3>{{ user_bus_pass.bus.destination }}</h3>
                            </div>
                        </div>
    
                        <div class="text-center mt-4">
                            <em>Boarding at {{ user_bus_pass.boarding_point }}</em>
                            <br>
                            <em>Expires on {{ user_bus_pass.expire_at }}</em>
                        </div>
                    </div>
                    
                    <hr>

                    <div class="text-center">
                        <h1><i class="fa-solid fa-circle-check text-success"></i> INR {{ user_bus_pass.fare }}</h1>
                    </div>

                    <div class="card">
                        <div class=card-body>
                            <div class="row">
                                <div class="col-md-9">
                                    <p class="mt-3">
                                        <span>{{ user_bus_pass.user.first_name }} {{ user_bus_pass.user.last_name }}</span>
                                        <br>
                                        <span>{{ user_bus_pass.user.college_branch }}</span>
                                        <br>
                                        <span>{{ user_bus_pass.user.email }}</span>
                                        <br>
                                        <span>{{ user_bus_pass.user.phone_number }}</span>
                                    </p>
                                </div>
                                <div class="col-md-3">
                                    <img class="img-fluid" src="data:image/png;base64,{{ qr_code_data }}" alt="QR Code">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <a class="btn btn-danger" href="{% url 'cancel_pass' pk=user_bus_pass.pk %}">Cancel Pass</a>
                        <a class="btn btn-secondary" href="{% url 'home' %}">Back</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}